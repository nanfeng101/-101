<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.status.TextStatusMapper">
    <select id="getTouTiaoStatus" resultType="Text" parameterType="int">
        select * from text,text_status,text_type
        where id=text_status.text_id
        and isexamine=1
        and toutiao=1
        and type_id=text_type.id1
        limit #{current}, #{pageSize}
    </select>
    <select id="getReiDianStatus" resultType="Text" parameterType="int">
        select * from text,text_status,text_type
        where id=text_status.text_id
        and rhedian=1
        and isexamine=1
        and type_id=text_type.id1
        limit #{current}, #{pageSize}
    </select>
    <select id="getExamineStatus" resultType="Text" parameterType="int">
        select * from text,text_status,text_type
        where id=text_status.text_id
        and type_id=text_type.id1
        and isexamine=0
        and user_id=#{id}
    </select>
    <select id="getAllExamineStatus" resultType="Text">
        select * from text,text_status,text_type
        where id=text_status.text_id
        and type_id=text_type.id1
        and isexamine=0
    </select>
    <update id="updateStatusToutiao">
        update text_status set toutiao=#{n}
        where text_id = #{id}
    </update>
    <update id="updateStatusRedian">
        update text_status set redian=#{n}
        where text_id = #{id}
    </update>
    <select id="searchBiaotiText" resultType="Text">
        select * from text,text_status,user
        where text.id=text_status.text_id
        and text.user_id=user.id
        and isexamine=1
        and biaoti like concat("%",#{str},"%")
    </select>

</mapper>